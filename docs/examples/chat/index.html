<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8" class="next-head next-head"/><title class="jsx-551147592 next-head">Building a Realtime Chat Webapp - ZEIT Documentation</title><meta name="viewport" content="width=device-width, initial-scale=1.0" class="jsx-551147592 next-head"/><meta name="twitter:card" content="summary" class="jsx-551147592 next-head"/><meta name="twitter:site" content="@zeithq" class="jsx-551147592 next-head"/><meta name="og:title" content="Building a Realtime Chat Webapp - ZEIT Documentation" class="jsx-551147592 next-head"/><meta name="og:url" content="https://zeit.co/now" class="jsx-551147592 next-head"/><meta name="og:image" content="/zeit/twitter-card.png" class="jsx-551147592 next-head"/><link rel="apple-touch-icon" sizes="57x57" href="/favicon/apple-touch-icon-57x57.png" class="jsx-551147592 next-head"/><link rel="apple-touch-icon" sizes="60x60" href="/favicon/apple-touch-icon-60x60.png" class="jsx-551147592 next-head"/><link rel="apple-touch-icon" sizes="72x72" href="/favicon/apple-touch-icon-72x72.png" class="jsx-551147592 next-head"/><link rel="apple-touch-icon" sizes="76x76" href="/favicon/apple-touch-icon-76x76.png" class="jsx-551147592 next-head"/><link rel="apple-touch-icon" sizes="114x114" href="/favicon/apple-touch-icon-114x114.png" class="jsx-551147592 next-head"/><link rel="apple-touch-icon" sizes="120x120" href="/favicon/apple-touch-icon-120x120.png" class="jsx-551147592 next-head"/><link rel="apple-touch-icon" sizes="144x144" href="/favicon/apple-touch-icon-144x144.png" class="jsx-551147592 next-head"/><link rel="apple-touch-icon" sizes="152x152" href="/favicon/apple-touch-icon-152x152.png" class="jsx-551147592 next-head"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon-180x180.png" class="jsx-551147592 next-head"/><link rel="icon" type="image/png" href="/favicon/favicon-32x32.png" sizes="32x32" class="jsx-551147592 next-head"/><link rel="icon" type="image/png" href="/favicon/android-chrome-192x192.png" sizes="192x192" class="jsx-551147592 next-head"/><link rel="icon" type="image/png" href="/favicon/favicon-96x96.png" sizes="96x96" class="jsx-551147592 next-head"/><link rel="icon" type="image/png" href="/favicon/favicon-16x16.png" sizes="16x16" class="jsx-551147592 next-head"/><link rel="manifest" href="/front/favicon/manifest.json" class="jsx-551147592 next-head"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#ffffff" class="jsx-551147592 next-head"/><link rel="shortcut icon" href="/favicon/favicon.ico" class="jsx-551147592 next-head"/><meta name="theme-color" content="#000" class="jsx-551147592 next-head"/><style class="next-head">
            #nprogress .bar {
              background: #000;
            }

            #nprogress .peg {
              box-shadow: 0 0 10px #ccc, 0 0 5px #ccc;
            }
          </style><style class="next-head">
            html {
              height: 100%;
              box-sizing: border-box;
            }

            *,
            *:before,
            *:after {
              box-sizing: inherit;
            }

            a {
              -webkit-tap-highlight-color: rgba(0,0,0,0);
            }

            body {
              position: relative;
              min-height: 100%;
              margin: 0;
              padding-bottom: 6rem;
              font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;
              text-rendering: optimizeLegibility;
            }

            html, body {
              background-color: #fff;
              color: #000;
            }

            
              ::selection {
                background-color: #79FFE1;
                color: #000;
              }
            
          </style><link rel="preload" href="/_next/dfec3bf1-e714-44d9-b82e-74a8b15b2776/page/docs/examples/chat.js" as="script"/><link rel="preload" href="/_next/dfec3bf1-e714-44d9-b82e-74a8b15b2776/page/_error.js" as="script"/><link rel="preload" href="/_next/32d3957f083e942194b09df1aa9b784a/app.js" as="script"/><style id="__jsx-551147592">#nprogress{pointer-events:none;}
#nprogress .bar{position:fixed;z-index:2000;top:0;left:0;width:100%;height:2px;}
#nprogress .peg{display:block;position:absolute;right:0px;width:100px;height:100%;opacity:1;-webkit-transform:rotate(3deg) translate(0px,-4px);-ms-transform:rotate(3deg) translate(0px,-4px);transform:rotate(3deg) translate(0px,-4px);}</style><style id="__jsx-2557790153">header.jsx-2557790153{max-width:900px;margin:auto;padding:30px 0;position:relative;}
.clean.jsx-2557790153{max-width:100%;margin:0 30px;}
.lean.jsx-2557790153 .nav.left.jsx-2557790153,.lean.jsx-2557790153 .nav.right.jsx-2557790153 .day.jsx-2557790153,.lean.jsx-2557790153 .nav.right.jsx-2557790153 .download.jsx-2557790153,.lean.jsx-2557790153 .nav.right.jsx-2557790153 .chat.jsx-2557790153,.lean.jsx-2557790153 .nav.right.jsx-2557790153 .tv.jsx-2557790153{visibility:hidden;}
.nav.jsx-2557790153>a.jsx-2557790153{color:#999;font-size:11px;text-decoration:none;-webkit-transition:color 0.2s ease;transition:color 0.2s ease;}
.nav.jsx-2557790153>a.jsx-2557790153{color:#999;}
.nav.jsx-2557790153>a.jsx-2557790153:hover{color:#000;}
.dark.jsx-2557790153 .nav.jsx-2557790153>a.jsx-2557790153:hover{color:#fff;}
.logout-error.jsx-2557790153{height:25px;position:fixed;top:0;left:0;right:0;font-size:12px;text-transform:uppercase;line-height:25px;vertical-align:middle;z-index:100000;background:#ff001f;text-align:center;color:#fff;-webkit-animation:hide-jsx-2557790153 100ms ease-out;animation:hide-jsx-2557790153 100ms ease-out;}
@-webkit-keyframes hide-jsx-2557790153{from{-webkit-transform:translateY(-25px);-ms-transform:translateY(-25px);transform:translateY(-25px);}to{-webkit-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0);}}
@keyframes hide-jsx-2557790153{from{-webkit-transform:translateY(-25px);-ms-transform:translateY(-25px);transform:translateY(-25px);}to{-webkit-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0);}}
a.logo.jsx-2557790153{display:block;width:39px;height:35px;position:relative;}
.nav.jsx-2557790153{margin-top:-2px;padding:10px;padding-right:0;position:absolute;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);}
.nav.jsx-2557790153 .chat.jsx-2557790153{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;}
.nav.jsx-2557790153 .chat.jsx-2557790153 span.jsx-2557790153{background-color:#333;width:26px;text-align:center;margin-left:10px;padding:2px 5px;line-height:11px;display:inline-block;color:#eee;font-size:8px;border-radius:8px;font-weight:bold;vertical-align:middle;opacity:0;-webkit-transition:all 1s ease;transition:all 1s ease;}
.nav.jsx-2557790153 .chat.chat-active.jsx-2557790153 span.jsx-2557790153{opacity:1;}
.dark.jsx-2557790153 .nav.jsx-2557790153 .chat.jsx-2557790153 span.jsx-2557790153{background-color:#eee;color:#444;}
.nav.jsx-2557790153 .chat.jsx-2557790153:hover span.jsx-2557790153{color:#fff;background-color:#000;}
.dark.jsx-2557790153 .nav.jsx-2557790153 .chat.jsx-2557790153:hover span.jsx-2557790153{background-color:#fff;color:#000;}
.nav.jsx-2557790153 a.jsx-2557790153{padding:10px;font-size:12px;text-transform:uppercase;font-weight:normal;vertical-align:middle;line-height:30px;}
.nav.jsx-2557790153 a.jsx-2557790153:last-child{padding-right:0;}
.nav.jsx-2557790153 a.active.jsx-2557790153{color:#000;}
.dark.jsx-2557790153 .nav.jsx-2557790153 a.active.jsx-2557790153{color:#fff;}
.menu-arrow.jsx-2557790153{display:none;width:40px;height:40px;-webkit-tap-highlight-color:rgba(0,0,0,0);}
.right.jsx-2557790153{right:0;}
.left.jsx-2557790153{left:0;}
.title.jsx-2557790153{margin-bottom:60px;font-size:14px;font-weight:normal;text-align:center;color:#000;}
.title.jsx-2557790153 b.jsx-2557790153{font-weight:bold;}
.dark.jsx-2557790153 .title.jsx-2557790153{color:#fff;}
@-webkit-keyframes fadeOut-jsx-2557790153{from{opacity:1;}to{opacity:0.7;}}
@keyframes fadeOut-jsx-2557790153{from{opacity:1;}to{opacity:0.7;}}
@-webkit-keyframes rotateInitial-jsx-2557790153{from{-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}to{-webkit-transform:rotate(15deg);-ms-transform:rotate(15deg);transform:rotate(15deg);}}
@keyframes rotateInitial-jsx-2557790153{from{-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}to{-webkit-transform:rotate(15deg);-ms-transform:rotate(15deg);transform:rotate(15deg);}}
@-webkit-keyframes rotate-jsx-2557790153{from{-webkit-transform:rotate(15deg);-ms-transform:rotate(15deg);transform:rotate(15deg);}30%{-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}70%{-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}to{-webkit-transform:rotate(-15deg);-ms-transform:rotate(-15deg);transform:rotate(-15deg);}}
@keyframes rotate-jsx-2557790153{from{-webkit-transform:rotate(15deg);-ms-transform:rotate(15deg);transform:rotate(15deg);}30%{-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}70%{-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}to{-webkit-transform:rotate(-15deg);-ms-transform:rotate(-15deg);transform:rotate(-15deg);}}
.nav.jsx-2557790153>a.download.jsx-2557790153{color:#ff0080;-webkit-transition:color 0.2s ease;transition:color 0.2s ease;}
.nav.jsx-2557790153>a.download.jsx-2557790153:hover,.dark.jsx-2557790153 .nav.jsx-2557790153>a.download.jsx-2557790153:hover{color:#ff0080;}
.avatar.jsx-2557790153{margin-left:10px;}
.lean.jsx-2557790153 .avatar.jsx-2557790153{-webkit-filter:grayscale(100%);filter:grayscale(100%);}
.mobile-link.jsx-2557790153{display:none;}
@media screen and (max-width:950px){header.jsx-2557790153{text-align:left;}header.clean.jsx-2557790153{margin:0;}.clean.jsx-2557790153 .menu-arrow.jsx-2557790153{display:none;}.lean.jsx-2557790153 .nav.left.jsx-2557790153,.lean.jsx-2557790153 .nav.right.jsx-2557790153 .download.jsx-2557790153,.lean.jsx-2557790153 .nav.right.jsx-2557790153 .chat.jsx-2557790153{visibility:visible;}.nav.jsx-2557790153{padding-top:40px;padding-bottom:0;padding-left:0;position:relative;-webkit-transform:none;-ms-transform:none;transform:none;top:20px;}.nav.jsx-2557790153 a.jsx-2557790153{border-bottom:1px solid #eaeaea;color:#000;display:block;font-size:14px;line-height:50px;height:50px;padding:0 20px;}.nav.jsx-2557790153 a.jsx-2557790153:hover,.nav.jsx-2557790153 a.active.jsx-2557790153{background:#f8f8f8;}.nav.jsx-2557790153 a.active.jsx-2557790153{background:#f8f8f8;font-weight:bold;}.dark.jsx-2557790153 .nav.jsx-2557790153 a.jsx-2557790153{border-bottom-color:#333333;color:#fff;}.dark.jsx-2557790153 .nav.jsx-2557790153 a.jsx-2557790153:hover,.dark.jsx-2557790153 .nav.jsx-2557790153 a.active.jsx-2557790153{background:#121212;}.dark.jsx-2557790153 .nav.jsx-2557790153>a.download.jsx-2557790153{color:#ff0080;}.nav-container.jsx-2557790153{display:none;background:#fff;width:100%;min-height:90vh;z-index:1;}.nav.jsx-2557790153 .chat.jsx-2557790153,.nav.jsx-2557790153 .account.jsx-2557790153{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.nav.jsx-2557790153 .chat.jsx-2557790153>span.jsx-2557790153{border-radius:12px;font-size:12px;margin-left:auto;padding:4px 7px;width:auto;}.nav.jsx-2557790153 .avatar-container.jsx-2557790153{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-left:auto;}.dark.jsx-2557790153 .nav-container.jsx-2557790153{background:#000;}.nav-container.responsive.jsx-2557790153{display:block;margin-bottom:20px;}.nav-container.jsx-2557790153 .left.jsx-2557790153{left:0;padding:0;}.menu-arrow.jsx-2557790153{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:absolute;top:28px;right:20px;-webkit-transition:-webkit-transform 0.2s ease;-webkit-transition:transform 0.2s ease;transition:transform 0.2s ease;}.menu-arrow.jsx-2557790153{fill:#000;}.dark.jsx-2557790153 .menu-arrow.jsx-2557790153{fill:#fff;}.menu-arrow.toggled.jsx-2557790153{-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg);}.mobile-link.jsx-2557790153{display:inline-block;}.mobile-logout.jsx-2557790153{cursor:pointer;}.avatar.jsx-2557790153{display:none;}}</style><style id="__jsx-3479111091">.active-button.jsx-3479111091 button{color:#000;}</style><style id="__jsx-191560282">.active-button.jsx-191560282 button{color:#999;}</style><style id="__jsx-2789748526">.toggle-container.jsx-2789748526{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-bottom:30px;}
.toggle.jsx-2789748526{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;border-radius:5px;border:1px solid #eaeaea;}
.toggle.jsx-2789748526 button.jsx-2789748526{min-width:80px;padding:0 12px;border:none;background:none;cursor:pointer;height:24px;font-size:12px;-webkit-transition:color 0.12s ease-in-out;transition:color 0.12s ease-in-out;}
.toggle.jsx-2789748526 span:not(:last-child){border-right:1px solid #eaeaea;}
.toggle.jsx-2789748526 button.jsx-2789748526:focus{outline:none;}
.toggle.jsx-2789748526 button.jsx-2789748526:hover{color:#000;}</style><style id="__jsx-1209335851">div.jsx-1209335851{padding:4px 10px 4px 30px;}
div.selected.jsx-1209335851{border-left:4px solid black;box-sizing:border-box;padding-left:26px;}
a.jsx-1209335851{text-decoration:none;font-size:14px;color:#000;box-sizing:border-box;}
a.selected.jsx-1209335851{font-weight:600;color:#000;}
span.jsx-1209335851{color:#979797;}
@media screen and (max-width:950px){div.jsx-1209335851{padding-top:0;padding-left:0;padding-bottom:0;}div.selected.jsx-1209335851{border-left:none;padding-left:0;}a.jsx-1209335851{display:block;padding:20px 0;}}</style><style id="__jsx-1806442985">.link.jsx-1806442985{margin:10px 0;}
@media screen and (max-width:950px){.link.jsx-1806442985{margin:0;border-bottom:1px solid #eee;}}</style><style id="__jsx-569470026">.label.jsx-569470026{margin:0 0 15px 0;font-size:13px;text-transform:uppercase;-webkit-letter-spacing:1.3px;-moz-letter-spacing:1.3px;-ms-letter-spacing:1.3px;letter-spacing:1.3px;font-weight:400;color:#888;cursor:default;}
.level-2.jsx-569470026 .label.jsx-569470026{font-size:14px;font-weight:400;margin:10px 0;text-transform:none;-webkit-letter-spacing:0;-moz-letter-spacing:0;-ms-letter-spacing:0;letter-spacing:0;cursor:default;}
.category.level-1.jsx-569470026{margin:0 0 50px 0;}
.label.jsx-569470026:not(.link){padding-left:30px;}
@media screen and (max-width:950px){.label.jsx-569470026{margin:0;}.label.jsx-569470026:not(.link){padding-left:0;}.level-2.jsx-569470026 .label.jsx-569470026{margin:0;border-bottom:1px solid #eee;}.level-2.jsx-569470026 .label.jsx-569470026:not(.link){padding:20px 0;}}</style><style id="__jsx-2138491404">.body-freeze-scroll{overflow:hidden;}</style><style id="__jsx-482818758">.arrow.jsx-482818758{position:absolute;top:40px;right:20px;width:27px;-webkit-transition:-webkit-transform 0.2s ease;-webkit-transition:transform 0.2s ease;transition:transform 0.2s ease;z-index:102;}
.arrow.show.jsx-482818758{-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg);}
.sticky.jsx-482818758 .arrow.jsx-482818758{position:fixed;}
.navbar-container.jsx-482818758{background:#fff;width:100%;overflow:scroll;z-index:102;}
.sticky.jsx-482818758 .navbar-container.jsx-482818758{height:calc(100% - 95px);padding:0 20px;position:fixed;top:95px;left:0;}</style><style id="__jsx-2412941416">div.jsx-2412941416{font-weight:400;font-size:14px;line-height:24px;margin-bottom:20px;}</style><style id="__jsx-3039837356">a.jsx-3039837356{border-bottom:1px solid transparent;color:inherit;margin-right:10px;text-decoration:none;}
a.jsx-3039837356:hover{border-bottom-color:inherit;}
h1[data-components-heading] a.jsx-3039837356::before{content:'# ';}
h2[data-components-heading] a.jsx-3039837356::before{content:'## ';}
h3[data-components-heading] a.jsx-3039837356::before{content:'### ';}
.lean[data-components-heading] a.jsx-3039837356::before{content:'';}
h1[data-components-heading]::before,h2[data-components-heading]::before,h3[data-components-heading]::before,h4[data-components-heading]::before{display:none;}
.target.jsx-3039837356{display:block;margin-top:-20px;padding-top:20px;visibility:hidden;position:absolute;}
.permalink.jsx-3039837356{text-align:center;vertical-align:middle;visibility:hidden;}
a.jsx-3039837356:hover~.permalink.jsx-3039837356{visibility:visible;}</style><style id="__jsx-4122739211">h3.jsx-4122739211{font-weight:bold;font-size:18px;}</style><style id="__jsx-2821545348">div.jsx-2821545348{margin:40px 0 0 0;}</style><style id="__jsx-3597645196">a.jsx-3597645196{text-decoration:none;color:#067df7;font-size:inherit;}
a.jsx-3597645196:hover{text-decoration:underline;}
a.dark.jsx-3597645196{color:#fff;}</style><style id="__jsx-3988571695">div.jsx-3988571695{border:1px solid #eaeaea;color:#bd10e0;font-family:Menlo,Monaco,Lucida Console,Liberation Mono, DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New,monospace, serif;font-size:13px;line-height:20px;margin:40px 0;padding:20px;-webkit-overflow-scrolling:touch;white-space:pre;overflow:auto;}
div.jsx-3988571695 span.jsx-3988571695{display:block;}
div.jsx-3988571695 span.jsx-3988571695::before{content:'$ ';}
div.dark.jsx-3988571695{border-color:#333;color:#5ce6cd;}</style><style id="__jsx-1576259564">pre.jsx-1576259564{border:1px solid #eaeaea;padding:20px;margin:40px 0;overflow:auto;}
code.jsx-1576259564{color:#bd10e0;font-family:Menlo,Monaco,Lucida Console,Liberation Mono, DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New,monospace, serif;font-size:13px;line-height:20px;}
pre.dark.jsx-1576259564{border-color:#333;}
.dark.jsx-1576259564 code.jsx-1576259564{color:#fff;}
.dark.shell.jsx-1576259564 code.jsx-1576259564{color:#50e3c2;}</style><style id="__jsx-242965930">span.jsx-242965930 span.jsx-242965930{display:inline-block;}</style><style id="__jsx-2204682850">code.jsx-2204682850{color:#bd10e0;font-family:Menlo,Monaco,Lucida Console,Liberation Mono, DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New,monospace, serif;font-size:0.9em;white-space:pre-wrap;}
code.no-wrap.jsx-2204682850{white-space:nowrap;}
code.float-right.jsx-2204682850{float:right;}
code.jsx-2204682850::before{content:'`';}
code.jsx-2204682850::after{content:'`';}</style><style id="__jsx-852904543">li.jsx-852904543{font-size:14px;line-height:24px;margin-bottom:10px;}</style><style id="__jsx-2350283465">ul.jsx-2350283465{padding:0;list-style-type:none;margin-left:15px;}
ul.jsx-2350283465>li::before{content:'-';display:inline-block;color:#999;position:absolute;margin-left:-15px;}</style><style id="__jsx-2503757143">figure.jsx-2503757143{text-align:center;display:block;}
main.jsx-2503757143{margin:0 auto;max-width:100%;}
div.jsx-2503757143{position:relative;}
img.jsx-2503757143,video.jsx-2503757143{position:absolute;top:0;left:0;height:100%;width:100%;}
p.jsx-2503757143{font-size:11px;text-align:center;color:#999;}</style><style id="__jsx-219205317">span.jsx-219205317{font-weight:600;}</style><style id="__jsx-1299736908">a.jsx-1299736908{text-decoration:none;color:#067df7;font-size:inherit;}
a.jsx-1299736908:hover{text-decoration:underline;}
a.dark.jsx-1299736908{color:#fff;border-bottom:1px solid #fff;}
a.dark.jsx-1299736908:hover{text-decoration:none;}</style><style id="__jsx-4178963918">.toggle.jsx-4178963918{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}
a.jsx-4178963918{text-decoration:none;color:#999;-webkit-transition:color 0.2s ease;transition:color 0.2s ease;}
a.jsx-4178963918:hover{color:#000;}
.button.jsx-4178963918:first-of-type{width:79px;margin-left:30px;border-right:none;border-radius:5px 0 0 5px;}
.button.jsx-4178963918{text-align:center;font-size:12px;border:1px solid #eaeaea;display:inline-block;padding:5px 10px 5px 10px;margin-bottom:30px;border-radius:0 5px 5px 0;}
.doc-layout.jsx-4178963918{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:96px 30px 50px 271px;padding:0 20px;-webkit-box-pack:left;-webkit-justify-content:left;-ms-flex-pack:left;justify-content:left;-webkit-font-smoothing:antialiased;}
.header.jsx-4178963918{position:fixed;top:0;left:0;right:0;}
.sidebar.jsx-4178963918{position:fixed;width:240px;margin-top:0;bottom:0;left:0;top:100px;overflow:auto;-webkit-font-smoothing:antialiased;}
.topbar.jsx-4178963918{display:none;}
.content.jsx-4178963918{-webkit-flex:1;-ms-flex:1;flex:1;max-width:600px;}
.content.jsx-4178963918 h1.jsx-4178963918{color:#000;font-size:26px;line-height:1.1;font-weight:400;margin:0 0 30px 0;padding:0;}
footer.jsx-4178963918{border-top:1px solid #eaeaea;padding-top:30px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}
footer.jsx-4178963918 time.jsx-4178963918{color:#999;font-size:14px;}
footer.jsx-4178963918 a.jsx-4178963918{text-transform:uppercase;color:black;font-size:12px;font-weight:bold;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}
footer.jsx-4178963918 a.jsx-4178963918 span.jsx-4178963918{margin-right:0.5em;}
@media screen and (max-width:950px){.header.jsx-4178963918{position:relative;}.doc-layout.jsx-4178963918{display:block;margin:0;}.content.jsx-4178963918{width:100%;margin-left:0;}.sidebar.jsx-4178963918{display:none;}.topbar.jsx-4178963918{display:block;}}</style></head><body><div><div id="__next"><div data-reactroot=""><div class="jsx-551147592"></div><div class="jsx-4178963918 header"><div class="jsx-2557790153 
        
        
      "><header class="jsx-2557790153 clean"><div class="jsx-2557790153 menu-arrow"></div><div class="jsx-2557790153 nav-container "><div class="jsx-2557790153 nav left"><a class="jsx-2557790153 " href="/"><b class="jsx-2557790153">GETSOLIDITY.COM</b></a></div><div class="jsx-2557790153 nav right"><a class="jsx-2557790153 mobile-link" href="/dashboard/">ABI</a><a class="jsx-2557790153 mobile-link account" href="/account/">SETH</a><a class="jsx-2557790153 mobile-logout mobile-link">Logout</a><a class="jsx-2557790153 " href="/login/">TRY</a><a class="jsx-2557790153 " href="/login/">ABI</a><a class="jsx-2557790153 " href="/login/">SETH</a><a class="jsx-2557790153 " href="/login/">SOLIDITY</a></div></div></header><h4 class="jsx-2557790153 clean"> ABI</h4></div></div><div class="jsx-2138491404"><div class="jsx-4178963918 sidebar"><div class="jsx-2789748526 toggle-container"><div class="jsx-2789748526 toggle"><span class="jsx-3479111091 active-button"><button class="jsx-2789748526">Docs</button></span><span class="jsx-191560282 active-button"><button class="jsx-2789748526">API Reference</button></span></div></div><div><div class="jsx-569470026 category level-1"><div class="jsx-569470026 label">ABIs</div><div class="jsx-569470026 posts"><div class="jsx-1806442985 link"><div class="jsx-1209335851 "><a class="jsx-1209335851 " href="/crypto-kitties/"> <!-- -->Crypto Kitties</a></div></div><div class="jsx-1806442985 link"><div class="jsx-1209335851 "><a class="jsx-1209335851 " href="/athenian/"> <!-- -->Athenian</a></div></div><div class="jsx-1806442985 link"><div class="jsx-1209335851 "><a class="jsx-1209335851 " href="/battle-of-thermopylae/"> <!-- -->Battle of thermopylae</a></div></div></div></div></div></div></div><div class="jsx-4178963918"><div class="jsx-4178963918 doc-layout"><div class="jsx-4178963918 topbar"><div class="jsx-482818758 "><div class="jsx-482818758 arrow"><svg style="fill:inherit" width="27px" height="14px" viewBox="0 0 27 14" version="1.1"><g id="Page-1" stroke="none" stroke-width="1" fill-rule="evenodd"><polygon id="Arrow" fill-rule="nonzero" points="13.4999996 13.9214282 0.6 1.17499997 1.82857139 0.1 13.4999996 11.7714282 25.1714278 0.1 26.3999992 1.17499997"></polygon></g></svg></div></div></div><div class="jsx-4178963918 content"><h1 class="jsx-4178963918">Building a Realtime Chat Webapp</h1><div class="jsx-4178963918 doc-markdown"><div class="_markdown_"><div class="jsx-2412941416">Writing a chat application with popular web applications stacks like LAMP (PHP) has traditionally been very hard. It involves polling the server for changes, keeping track of timestamps, and it’s a lot slower than it should be.</div><div class="jsx-2412941416">Sockets have traditionally been the solution around which most realtime chat systems are architected, providing a bi-directional communication channel between a client and a server.</div><div class="jsx-2412941416">This means that the server can push messages to clients. Whenever you write a chat message, the idea is that the server will get it and push it to all other connected clients.</div><div class="jsx-2821545348"><h3 class="jsx-4122739211"><span id="requirements" style="margin-top:-175px;padding-top:175px" class="jsx-3039837356 target"></span><a href="#requirements" class="jsx-3039837356">Requirements</a><span class="jsx-3039837356 permalink"><svg width="11px" height="11px" viewBox="0 0 11 11" version="1.1" xmlns="http://www.w3.org/2000/svg"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-432.000000, -181.000000)" fill="#9B9B9B"><path d="M442.36949,184.673746 L440.543368,186.500079 C440.047223,186.996013 439.369736,187.191548 438.72445,187.101937 L439.934732,185.891655 L441.760854,184.065321 C442.26505,183.561549 442.26505,182.743395 441.760854,182.238988 C441.256658,181.735003 440.438928,181.735003 439.934732,182.238988 L438.10861,184.065321 L436.897904,185.275815 C436.808293,184.630529 437.003616,183.95283 437.499762,183.456684 L439.325883,181.630775 C440.166281,180.789742 441.528881,180.789742 442.369278,181.630775 C443.209887,182.470748 443.209887,183.833772 442.36949,184.673746 L442.36949,184.673746 Z M438.717247,185.891655 L436.891125,187.717565 L436.282277,187.108928 L438.10861,185.282594 L438.717247,185.891655 L438.717247,185.891655 Z M433.238882,188.934838 C432.734686,189.439246 432.734686,190.256552 433.238882,190.760959 C433.743078,191.265579 434.560807,191.265579 435.065003,190.760959 L436.891125,188.934838 L438.101619,187.724344 C438.191442,188.369842 437.996119,189.047329 437.499974,189.543474 L435.673852,191.369384 C434.833455,192.210205 433.470854,192.210205 432.630457,191.369384 C431.789848,190.529411 431.789848,189.166387 432.630457,188.326413 L434.456579,186.500079 C434.952724,186.003722 435.630423,185.808399 436.275709,185.898222 L435.065215,187.108928 L433.238882,188.934838 L433.238882,188.934838 Z"></path></g></g></svg></span></h3></div><div class="jsx-2412941416">Before we get started, please make sure that your instance of Node is up-to-date. You should have the latest &quot;Current&quot; release (compare it with <a href="https://nodejs.org/" target="_blank" rel="noopener noreferrer" class="jsx-3597645196 ">this</a>). If it&#x27;s not, click on the download button on the site and get yourself the newest version.</div><div class="jsx-2412941416">You can use this command to check the version tag of your local instance:</div><div class="jsx-2412941416"><div class="jsx-3988571695 "><span class="jsx-3988571695">node -v</span></div></div><div class="jsx-2412941416">Once the output of the command matches the latest version on the site, go on to the next section.</div><div class="jsx-2821545348"><h3 class="jsx-4122739211"><span id="setup" style="margin-top:-175px;padding-top:175px" class="jsx-3039837356 target"></span><a href="#setup" class="jsx-3039837356">Setup</a><span class="jsx-3039837356 permalink"><svg width="11px" height="11px" viewBox="0 0 11 11" version="1.1" xmlns="http://www.w3.org/2000/svg"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-432.000000, -181.000000)" fill="#9B9B9B"><path d="M442.36949,184.673746 L440.543368,186.500079 C440.047223,186.996013 439.369736,187.191548 438.72445,187.101937 L439.934732,185.891655 L441.760854,184.065321 C442.26505,183.561549 442.26505,182.743395 441.760854,182.238988 C441.256658,181.735003 440.438928,181.735003 439.934732,182.238988 L438.10861,184.065321 L436.897904,185.275815 C436.808293,184.630529 437.003616,183.95283 437.499762,183.456684 L439.325883,181.630775 C440.166281,180.789742 441.528881,180.789742 442.369278,181.630775 C443.209887,182.470748 443.209887,183.833772 442.36949,184.673746 L442.36949,184.673746 Z M438.717247,185.891655 L436.891125,187.717565 L436.282277,187.108928 L438.10861,185.282594 L438.717247,185.891655 L438.717247,185.891655 Z M433.238882,188.934838 C432.734686,189.439246 432.734686,190.256552 433.238882,190.760959 C433.743078,191.265579 434.560807,191.265579 435.065003,190.760959 L436.891125,188.934838 L438.101619,187.724344 C438.191442,188.369842 437.996119,189.047329 437.499974,189.543474 L435.673852,191.369384 C434.833455,192.210205 433.470854,192.210205 432.630457,191.369384 C431.789848,190.529411 431.789848,189.166387 432.630457,188.326413 L434.456579,186.500079 C434.952724,186.003722 435.630423,185.808399 436.275709,185.898222 L435.065215,187.108928 L433.238882,188.934838 L433.238882,188.934838 Z"></path></g></g></svg></span></h3></div><div class="jsx-2412941416">As the first step, we need to setup a simple HTML webpage that shows a form (which can contain the message to sent) and a list of messages sent before.</div><div class="jsx-2412941416">In turn, the first thing we&#x27;ll do is create a new directory and move into it:</div><div class="jsx-2412941416"><pre class="jsx-1576259564 "><code class="jsx-1576259564">{
  &quot;name&quot;: &quot;realtime-chat&quot;,
  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;node index&quot;
  },
  &quot;dependencies&quot;: {
    &quot;express&quot;: &quot;latest&quot;
  }
}</code></pre></div><div class="jsx-2412941416">The code above tells <span style="color:#000" class="jsx-242965930 now">Now</span> the name of the project (&quot;realtime-chat&quot;) and also indicates that <a href="https://nodejs.org/" target="_blank" rel="noopener noreferrer" class="jsx-3597645196 ">Node.js</a> needs to install the latest version of the <a href="https://www.npmjs.com/package/express" target="_blank" rel="noopener noreferrer" class="jsx-3597645196 ">express</a> package (which will be used for serving our code to the user). To install the <code class="jsx-2204682850 ">dependencies</code>, you now need to run this command inside your terminal:</div><div class="jsx-2412941416"><div class="jsx-3988571695 "><span class="jsx-3988571695">npm install</span></div></div><div class="jsx-2412941416">Now that <a href="https://www.npmjs.com/package/express" target="_blank" rel="noopener noreferrer" class="jsx-3597645196 ">express</a> is handled, you need to create a <code class="jsx-2204682850 ">index.js</code> file inside the directory and insert the following code:</div><div class="jsx-2412941416"><pre class="jsx-1576259564 "><code class="jsx-1576259564">const app = require(&#x27;express&#x27;)()
const server = require(&#x27;http&#x27;).Server(app)

app.get(&#x27;/&#x27;, (req, res) =&gt; {
  res.send(&#x27;&lt;h1&gt;Hello world!&lt;/h1&gt;&#x27;)
})

server.listen(4000, () =&gt; {
  console.log(&#x27;The server is running: http://localhost:4000&#x27;)
})</code></pre></div><div class="jsx-2412941416">This translates into the following:</div><ul class="jsx-2350283465"><li class="jsx-852904543">Express initializes <code class="jsx-2204682850 ">app</code> to be a function handler that you can supply to an HTTP server (as seen in line 2).</li><li class="jsx-852904543">We define a route handler <code class="jsx-2204682850 ">/</code> that gets called when we hit our website home.</li><li class="jsx-852904543">We make the HTTP server available on port 3000.</li></ul><div class="jsx-2412941416">Now, when running <code class="jsx-2204682850 ">npm run start</code> inside your terminal, you should see the following:</div><div class="jsx-2412941416"><figure style="margin:40px 0" class="jsx-2503757143"><main style="width:550px" class="jsx-2503757143"><div style="padding-bottom:62.727272727272734%" class="jsx-2503757143"><img src="/static/docs/realtime-chat/server.png" class="jsx-2503757143"/></div></main></figure></div><div class="jsx-2412941416">And when pointing your browser to the address shown (<code class="jsx-2204682850 ">http://localhost:4000</code>):</div><div class="jsx-2412941416"><figure style="margin:40px 0" class="jsx-2503757143"><main style="width:550px" class="jsx-2503757143"><div style="padding-bottom:55.81818181818182%" class="jsx-2503757143"><img src="/static/docs/realtime-chat/hello-world.png" class="jsx-2503757143"/></div></main></figure></div><div class="jsx-2821545348"><h3 class="jsx-4122739211"><span id="serving-html" style="margin-top:-175px;padding-top:175px" class="jsx-3039837356 target"></span><a href="#serving-html" class="jsx-3039837356">Serving HTML</a><span class="jsx-3039837356 permalink"><svg width="11px" height="11px" viewBox="0 0 11 11" version="1.1" xmlns="http://www.w3.org/2000/svg"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-432.000000, -181.000000)" fill="#9B9B9B"><path d="M442.36949,184.673746 L440.543368,186.500079 C440.047223,186.996013 439.369736,187.191548 438.72445,187.101937 L439.934732,185.891655 L441.760854,184.065321 C442.26505,183.561549 442.26505,182.743395 441.760854,182.238988 C441.256658,181.735003 440.438928,181.735003 439.934732,182.238988 L438.10861,184.065321 L436.897904,185.275815 C436.808293,184.630529 437.003616,183.95283 437.499762,183.456684 L439.325883,181.630775 C440.166281,180.789742 441.528881,180.789742 442.369278,181.630775 C443.209887,182.470748 443.209887,183.833772 442.36949,184.673746 L442.36949,184.673746 Z M438.717247,185.891655 L436.891125,187.717565 L436.282277,187.108928 L438.10861,185.282594 L438.717247,185.891655 L438.717247,185.891655 Z M433.238882,188.934838 C432.734686,189.439246 432.734686,190.256552 433.238882,190.760959 C433.743078,191.265579 434.560807,191.265579 435.065003,190.760959 L436.891125,188.934838 L438.101619,187.724344 C438.191442,188.369842 437.996119,189.047329 437.499974,189.543474 L435.673852,191.369384 C434.833455,192.210205 433.470854,192.210205 432.630457,191.369384 C431.789848,190.529411 431.789848,189.166387 432.630457,188.326413 L434.456579,186.500079 C434.952724,186.003722 435.630423,185.808399 436.275709,185.898222 L435.065215,187.108928 L433.238882,188.934838 L433.238882,188.934838 Z"></path></g></g></svg></span></h3></div><div class="jsx-2412941416">So far in <code class="jsx-2204682850 ">index.js</code>, we’re calling <code class="jsx-2204682850 ">res.send</code> and passing it a HTML string. Our code would look very confusing if we just placed our entire application’s HTML there. Instead, we’re going to create a <code class="jsx-2204682850 ">index.html</code> file and serve it.</div><div class="jsx-2412941416">Let’s refactor our route handler to use <code class="jsx-2204682850 ">sendFile</code> instead:</div><div class="jsx-2412941416"><pre class="jsx-1576259564 "><code class="jsx-1576259564">app.get(&#x27;/&#x27;, (req, res) =&gt; {
  res.sendFile(__dirname + &#x27;/index.html&#x27;)
})</code></pre></div><div class="jsx-2412941416">And populate <code class="jsx-2204682850 ">index.html</code> with the following:</div><div class="jsx-2412941416"><pre class="jsx-1576259564 "><code class="jsx-1576259564">&lt;style&gt;
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font: 13px Helvetica, Arial; }
  form { background: grey; padding: 10px; position: fixed; bottom: 0; width: 100%; }
  form input { border: 0; padding: 10px; width: 90%; margin-right: .5%; }
  form button { width: 9%; background: rgb(130, 224, 255); border: none; padding: 10px; }
  #messages { list-style-type: none; margin: 0; padding: 0; }
  #messages li { padding: 5px 10px; }
  #messages li:nth-child(odd) { background: #eee; }
&lt;/style&gt;

&lt;ul id=&quot;messages&quot;&gt;&lt;/ul&gt;

&lt;form action=&quot;&quot;&gt;
  &lt;input id=&quot;m&quot; autocomplete=&quot;off&quot; /&gt;&lt;button&gt;Send&lt;/button&gt;
&lt;/form&gt;</code></pre></div><div class="jsx-2412941416">If you restart the process (by hitting <code class="jsx-2204682850 ">control + C</code> and running <code class="jsx-2204682850 ">npm run start</code> again) and refresh the page it should look like this:</div><div class="jsx-2412941416"><figure style="margin:40px 0" class="jsx-2503757143"><main style="width:550px" class="jsx-2503757143"><div style="padding-bottom:55.81818181818182%" class="jsx-2503757143"><img src="/static/docs/realtime-chat/form.png" class="jsx-2503757143"/></div></main></figure></div><div class="jsx-2821545348"><h3 class="jsx-4122739211"><span id="integrating-web-sockets" style="margin-top:-175px;padding-top:175px" class="jsx-3039837356 target"></span><a href="#integrating-web-sockets" class="jsx-3039837356">Integrating Web Sockets</a><span class="jsx-3039837356 permalink"><svg width="11px" height="11px" viewBox="0 0 11 11" version="1.1" xmlns="http://www.w3.org/2000/svg"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-432.000000, -181.000000)" fill="#9B9B9B"><path d="M442.36949,184.673746 L440.543368,186.500079 C440.047223,186.996013 439.369736,187.191548 438.72445,187.101937 L439.934732,185.891655 L441.760854,184.065321 C442.26505,183.561549 442.26505,182.743395 441.760854,182.238988 C441.256658,181.735003 440.438928,181.735003 439.934732,182.238988 L438.10861,184.065321 L436.897904,185.275815 C436.808293,184.630529 437.003616,183.95283 437.499762,183.456684 L439.325883,181.630775 C440.166281,180.789742 441.528881,180.789742 442.369278,181.630775 C443.209887,182.470748 443.209887,183.833772 442.36949,184.673746 L442.36949,184.673746 Z M438.717247,185.891655 L436.891125,187.717565 L436.282277,187.108928 L438.10861,185.282594 L438.717247,185.891655 L438.717247,185.891655 Z M433.238882,188.934838 C432.734686,189.439246 432.734686,190.256552 433.238882,190.760959 C433.743078,191.265579 434.560807,191.265579 435.065003,190.760959 L436.891125,188.934838 L438.101619,187.724344 C438.191442,188.369842 437.996119,189.047329 437.499974,189.543474 L435.673852,191.369384 C434.833455,192.210205 433.470854,192.210205 432.630457,191.369384 C431.789848,190.529411 431.789848,189.166387 432.630457,188.326413 L434.456579,186.500079 C434.952724,186.003722 435.630423,185.808399 436.275709,185.898222 L435.065215,187.108928 L433.238882,188.934838 L433.238882,188.934838 Z"></path></g></g></svg></span></h3></div><div class="jsx-2412941416">To handle these, we&#x27;ll be using the <a href="https://socket.io/" target="_blank" rel="noopener noreferrer" class="jsx-3597645196 ">socket.io</a> project. It consists of two packages:</div><ul class="jsx-2350283465"><li class="jsx-852904543">A server that integrates with (or mounts on) the Node.JS HTTP Server: <code class="jsx-2204682850 ">socket.io</code></li><li class="jsx-852904543">A client library that loads on the browser side: <code class="jsx-2204682850 ">socket.io-client</code></li></ul><div class="jsx-2412941416">During development, <code class="jsx-2204682850 ">socket.io</code> serves the client automatically for us, as we’ll see, so for now we only have to install one module:</div><div class="jsx-2412941416"><div class="jsx-3988571695 "><span class="jsx-3988571695">npm install --save socket.io</span></div></div><div class="jsx-2412941416">That will install the module and add the dependency to <code class="jsx-2204682850 ">package.json</code>. Now let’s edit <code class="jsx-2204682850 ">index.js</code> to load it:</div><div class="jsx-2412941416"><pre class="jsx-1576259564 "><code class="jsx-1576259564">const app = require(&#x27;express&#x27;)()
const server = require(&#x27;http&#x27;).Server(app)
const io = require(&#x27;socket.io&#x27;)(server)

app.get(&#x27;/&#x27;, (req, res) =&gt; {
  res.sendFile(__dirname + &#x27;/index.html&#x27;)
})

io.on(&#x27;connection&#x27;, socket =&gt; {
  console.log(&#x27;a user connected&#x27;)
})

server.listen(4000, () =&gt; {
  console.log(&#x27;The server is running: http://localhost:4000&#x27;)
})</code></pre></div><div class="jsx-2412941416">Notice that I initialize a new instance of <code class="jsx-2204682850 ">socket.io</code> by passing the <code class="jsx-2204682850 ">server</code> (the HTTP server) object. Then I listen on the <code class="jsx-2204682850 ">connection</code> event for incoming sockets, and I log it to the console.</div><div class="jsx-2412941416">Now, in <code class="jsx-2204682850 ">index.html</code>, we need to add the following snippet before the <code class="jsx-2204682850 ">&lt;/body&gt;</code> closing tag:</div><div class="jsx-2412941416"><pre class="jsx-1576259564 "><code class="jsx-1576259564">&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.7.3/socket.io.min.js&quot;&gt;&lt;/script&gt;

&lt;script&gt;
  var socket = io()
&lt;/script&gt;</code></pre></div><div class="jsx-2412941416">That’s all it takes to load the <code class="jsx-2204682850 ">socket.io-client</code> package, which exposes a <code class="jsx-2204682850 ">io</code> global, and then connect.</div><div class="jsx-2412941416">Notice that I’m not specifying any URL when I call <code class="jsx-2204682850 ">io()</code>, since it defaults to trying to connect to the host that serves the page. If you now reload the server and the website you should see the console print “a user connected”.</div><div class="jsx-2412941416">Try opening several tabs, and you’ll see several messages:</div><div class="jsx-2412941416"><figure style="margin:40px 0" class="jsx-2503757143"><main style="width:550px" class="jsx-2503757143"><div style="padding-bottom:62.727272727272734%" class="jsx-2503757143"><img src="/static/docs/realtime-chat/connected.png" class="jsx-2503757143"/></div></main></figure></div><div class="jsx-2412941416">Each socket also fires a special <code class="jsx-2204682850 ">disconnect</code> event:</div><div class="jsx-2412941416"><pre class="jsx-1576259564 "><code class="jsx-1576259564">io.on(&#x27;connection&#x27;, socket =&gt; {
  console.log(&#x27;a user connected&#x27;)

  socket.on(&#x27;disconnect&#x27;, () =&gt; {
    console.log(&#x27;user disconnected&#x27;)
  })
})</code></pre></div><div class="jsx-2412941416">Then if you refresh a tab several times you can see it in action:</div><div class="jsx-2412941416"><figure style="margin:40px 0" class="jsx-2503757143"><main style="width:550px" class="jsx-2503757143"><div style="padding-bottom:62.727272727272734%" class="jsx-2503757143"><img src="/static/docs/realtime-chat/disconnected.png" class="jsx-2503757143"/></div></main></figure></div><div class="jsx-2821545348"><h3 class="jsx-4122739211"><span id="emitting-events" style="margin-top:-175px;padding-top:175px" class="jsx-3039837356 target"></span><a href="#emitting-events" class="jsx-3039837356">Emitting Events</a><span class="jsx-3039837356 permalink"><svg width="11px" height="11px" viewBox="0 0 11 11" version="1.1" xmlns="http://www.w3.org/2000/svg"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-432.000000, -181.000000)" fill="#9B9B9B"><path d="M442.36949,184.673746 L440.543368,186.500079 C440.047223,186.996013 439.369736,187.191548 438.72445,187.101937 L439.934732,185.891655 L441.760854,184.065321 C442.26505,183.561549 442.26505,182.743395 441.760854,182.238988 C441.256658,181.735003 440.438928,181.735003 439.934732,182.238988 L438.10861,184.065321 L436.897904,185.275815 C436.808293,184.630529 437.003616,183.95283 437.499762,183.456684 L439.325883,181.630775 C440.166281,180.789742 441.528881,180.789742 442.369278,181.630775 C443.209887,182.470748 443.209887,183.833772 442.36949,184.673746 L442.36949,184.673746 Z M438.717247,185.891655 L436.891125,187.717565 L436.282277,187.108928 L438.10861,185.282594 L438.717247,185.891655 L438.717247,185.891655 Z M433.238882,188.934838 C432.734686,189.439246 432.734686,190.256552 433.238882,190.760959 C433.743078,191.265579 434.560807,191.265579 435.065003,190.760959 L436.891125,188.934838 L438.101619,187.724344 C438.191442,188.369842 437.996119,189.047329 437.499974,189.543474 L435.673852,191.369384 C434.833455,192.210205 433.470854,192.210205 432.630457,191.369384 C431.789848,190.529411 431.789848,189.166387 432.630457,188.326413 L434.456579,186.500079 C434.952724,186.003722 435.630423,185.808399 436.275709,185.898222 L435.065215,187.108928 L433.238882,188.934838 L433.238882,188.934838 Z"></path></g></g></svg></span></h3></div><div class="jsx-2412941416">The main idea behind Socket.IO is that you can send and receive any events you want, with any data you want. Any objects that can be encoded as JSON will do, and binary data is supported too.</div><div class="jsx-2412941416">Let’s make it so that when the user types in a message, the server gets it as a <code class="jsx-2204682850 ">chat message</code> event. The <code class="jsx-2204682850 ">scripts</code> section in <code class="jsx-2204682850 ">index.html</code> should now look as follows:</div><div class="jsx-2412941416"><pre class="jsx-1576259564 "><code class="jsx-1576259564">&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.7.3/socket.io.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://code.jquery.com/jquery-1.11.1.js&quot;&gt;&lt;/script&gt;

&lt;script&gt;
  $(() =&gt; {
    var socket = io()

    $(&#x27;form&#x27;).submit(() =&gt; {
      socket.emit(&#x27;chat message&#x27;, $(&#x27;#m&#x27;).val())
      $(&#x27;#m&#x27;).val(&#x27;&#x27;)

      return false
    })
  })
&lt;/script&gt;</code></pre></div><div class="jsx-2412941416">And in the <code class="jsx-2204682850 ">index.js</code> file, we print out the chat message event:</div><div class="jsx-2412941416"><pre class="jsx-1576259564 "><code class="jsx-1576259564">io.on(&#x27;connection&#x27;, socket =&gt; {
  socket.on(&#x27;chat message&#x27;, msg =&gt; {
    console.log(&#x27;message: &#x27; + msg)
  })
})</code></pre></div><div class="jsx-2412941416">Now, after you&#x27;ve restarted the server again, you should see the messages you&#x27;re typing and sending within the form appear inside the terminal. If that&#x27;s the case, go on to the next section!</div><div class="jsx-2821545348"><h3 class="jsx-4122739211"><span id="broadcasting" style="margin-top:-175px;padding-top:175px" class="jsx-3039837356 target"></span><a href="#broadcasting" class="jsx-3039837356">Broadcasting</a><span class="jsx-3039837356 permalink"><svg width="11px" height="11px" viewBox="0 0 11 11" version="1.1" xmlns="http://www.w3.org/2000/svg"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-432.000000, -181.000000)" fill="#9B9B9B"><path d="M442.36949,184.673746 L440.543368,186.500079 C440.047223,186.996013 439.369736,187.191548 438.72445,187.101937 L439.934732,185.891655 L441.760854,184.065321 C442.26505,183.561549 442.26505,182.743395 441.760854,182.238988 C441.256658,181.735003 440.438928,181.735003 439.934732,182.238988 L438.10861,184.065321 L436.897904,185.275815 C436.808293,184.630529 437.003616,183.95283 437.499762,183.456684 L439.325883,181.630775 C440.166281,180.789742 441.528881,180.789742 442.369278,181.630775 C443.209887,182.470748 443.209887,183.833772 442.36949,184.673746 L442.36949,184.673746 Z M438.717247,185.891655 L436.891125,187.717565 L436.282277,187.108928 L438.10861,185.282594 L438.717247,185.891655 L438.717247,185.891655 Z M433.238882,188.934838 C432.734686,189.439246 432.734686,190.256552 433.238882,190.760959 C433.743078,191.265579 434.560807,191.265579 435.065003,190.760959 L436.891125,188.934838 L438.101619,187.724344 C438.191442,188.369842 437.996119,189.047329 437.499974,189.543474 L435.673852,191.369384 C434.833455,192.210205 433.470854,192.210205 432.630457,191.369384 C431.789848,190.529411 431.789848,189.166387 432.630457,188.326413 L434.456579,186.500079 C434.952724,186.003722 435.630423,185.808399 436.275709,185.898222 L435.065215,187.108928 L433.238882,188.934838 L433.238882,188.934838 Z"></path></g></g></svg></span></h3></div><div class="jsx-2412941416">The next goal is for us to emit the event from the server to the rest of the users.</div><div class="jsx-2412941416">In order to send an event to everyone, Socket.IO gives us the <code class="jsx-2204682850 ">io.emit</code>:</div><div class="jsx-2412941416"><pre class="jsx-1576259564 "><code class="jsx-1576259564">io.emit(&#x27;some event&#x27;, {
  for: &#x27;everyone&#x27;
})</code></pre></div><div class="jsx-2412941416">If you want to send a message to everyone except for a certain socket, we have the <code class="jsx-2204682850 ">broadcast</code> flag:</div><div class="jsx-2412941416"><pre class="jsx-1576259564 "><code class="jsx-1576259564">io.on(&#x27;connection&#x27;, socket =&gt; {
  socket.broadcast.emit(&#x27;hi&#x27;)
})</code></pre></div><div class="jsx-2412941416">In this case, for the sake of simplicity we’ll send the message to everyone, including the sender.</div><div class="jsx-2412941416"><pre class="jsx-1576259564 "><code class="jsx-1576259564">io.on(&#x27;connection&#x27;, socket =&gt; {
  socket.on(&#x27;chat message&#x27;, msg =&gt; {
    io.emit(&#x27;chat message&#x27;, msg)
  })
})</code></pre></div><div class="jsx-2412941416">And on the client side when we capture a <code class="jsx-2204682850 ">chat message</code> event we’ll include it in the page. The total client-side JavaScript code now amounts to the following snippet:</div><div class="jsx-2412941416"><pre class="jsx-1576259564 "><code class="jsx-1576259564">&lt;script&gt;
  $(() =&gt; {
    var socket = io()

    $(&#x27;form&#x27;).submit(() =&gt; {
      socket.emit(&#x27;chat message&#x27;, $(&#x27;#m&#x27;).val())
      $(&#x27;#m&#x27;).val(&#x27;&#x27;)

      return false
    })

    socket.on(&#x27;chat message&#x27;, msg =&gt; {
      $(&#x27;#messages&#x27;).append($(&#x27;&lt;li&gt;&#x27;).text(msg))
    })
  })
&lt;/script&gt;</code></pre></div><div class="jsx-2412941416">And that completes our chat application, in about <span class="jsx-219205317">20 lines of code</span>! You can now send messages between two clients:</div><div class="jsx-2412941416"><figure style="margin:40px 0" class="jsx-2503757143"><main style="width:600px" class="jsx-2503757143"><div style="padding-bottom:95.33333333333334%" class="jsx-2503757143"><img src="/static/docs/realtime-chat/result.gif" class="jsx-2503757143"/></div></main></figure></div><div class="jsx-2821545348"><h3 class="jsx-4122739211"><span id="deploying-the-app" style="margin-top:-175px;padding-top:175px" class="jsx-3039837356 target"></span><a href="#deploying-the-app" class="jsx-3039837356">Deploying the App</a><span class="jsx-3039837356 permalink"><svg width="11px" height="11px" viewBox="0 0 11 11" version="1.1" xmlns="http://www.w3.org/2000/svg"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-432.000000, -181.000000)" fill="#9B9B9B"><path d="M442.36949,184.673746 L440.543368,186.500079 C440.047223,186.996013 439.369736,187.191548 438.72445,187.101937 L439.934732,185.891655 L441.760854,184.065321 C442.26505,183.561549 442.26505,182.743395 441.760854,182.238988 C441.256658,181.735003 440.438928,181.735003 439.934732,182.238988 L438.10861,184.065321 L436.897904,185.275815 C436.808293,184.630529 437.003616,183.95283 437.499762,183.456684 L439.325883,181.630775 C440.166281,180.789742 441.528881,180.789742 442.369278,181.630775 C443.209887,182.470748 443.209887,183.833772 442.36949,184.673746 L442.36949,184.673746 Z M438.717247,185.891655 L436.891125,187.717565 L436.282277,187.108928 L438.10861,185.282594 L438.717247,185.891655 L438.717247,185.891655 Z M433.238882,188.934838 C432.734686,189.439246 432.734686,190.256552 433.238882,190.760959 C433.743078,191.265579 434.560807,191.265579 435.065003,190.760959 L436.891125,188.934838 L438.101619,187.724344 C438.191442,188.369842 437.996119,189.047329 437.499974,189.543474 L435.673852,191.369384 C434.833455,192.210205 433.470854,192.210205 432.630457,191.369384 C431.789848,190.529411 431.789848,189.166387 432.630457,188.326413 L434.456579,186.500079 C434.952724,186.003722 435.630423,185.808399 436.275709,185.898222 L435.065215,187.108928 L433.238882,188.934838 L433.238882,188.934838 Z"></path></g></g></svg></span></h3></div><div class="jsx-2412941416">Once the realtime chat works as expected, we can deploy it by running this command:</div><div class="jsx-2412941416"><div class="jsx-3988571695 "><span class="jsx-3988571695">now</span></div></div><div class="jsx-2412941416">Once <span style="color:#000" class="jsx-242965930 now">Now</span> has finished uploading the files, you&#x27;ll see a URL that points to your freshly created chat. This means that you can already share the URL with other people across the globe and have them chat with you.</div><div class="jsx-2412941416">But in the case of a real website (not used for testing purposes), you would now have to <a class="jsx-1299736908 " href="/docs/features/aliases/">assign an alias</a> to it.</div></div></div><footer class="jsx-4178963918"><time dateTime="2018-02-14T17:18:59.027Z" class="jsx-4178963918">Last Edited: <!-- -->Wednesday, February 14th 2018<!-- --> (<!-- -->18 days<!-- -->)</time><a href="https://github.com/zeit/docs/edit/master/pages/docs/examples/chat.js" target="_blank" rel="noopener noreferrer" class="jsx-4178963918"><span class="jsx-4178963918">Edit on GitHub</span><svg viewBox="0 0 33 32" version="1.1" xmlns="http://www.w3.org/2000/svg" height="16" width="16"><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="github" fill="#000"><path d="M16.3,0 C7.3,0 -3.55271368e-15,7.3 -3.55271368e-15,16.3 C-3.55271368e-15,23.5 4.7,29.6 11.1,31.8 C11.9,31.9 12.2,31.4 12.2,31 L12.2,28.2 C7.7,29.2 6.7,26 6.7,26 C6,24.2 5,23.7 5,23.7 C3.5,22.7 5.1,22.7 5.1,22.7 C6.7,22.8 7.6,24.4 7.6,24.4 C9.1,26.9 11.4,26.2 12.3,25.8 C12.4,24.7 12.9,24 13.3,23.6 C9.7,23.2 5.9,21.8 5.9,15.5 C5.9,13.7 6.5,12.3 7.6,11.1 C7.4,10.7 6.9,9 7.8,6.8 C7.8,6.8 9.2,6.4 12.3,8.5 C13.6,8.1 15,8 16.4,8 C17.8,8 19.2,8.2 20.5,8.5 C23.6,6.4 25,6.8 25,6.8 C25.9,9 25.3,10.7 25.2,11.1 C26.2,12.2 26.9,13.7 26.9,15.5 C26.9,21.8 23.1,23.1 19.5,23.5 C20.1,24 20.6,25 20.6,26.5 L20.6,31 C20.6,31.4 20.9,31.9 21.7,31.8 C28.2,29.6 32.8,23.5 32.8,16.3 C32.6,7.3 25.3,0 16.3,0 L16.3,0 Z" id="Shape"></path></g></g></svg></a></footer></div><div class="jsx-4178963918"></div></div></div></div></div><div id="__next-error"></div></div><script>__ENV__ = {}</script><div><script>
          __NEXT_DATA__ = {"props":{},"page":"/docs/examples/chat","pathname":"/docs/examples/chat","query":{},"buildId":"dfec3bf1-e714-44d9-b82e-74a8b15b2776","buildStats":{"app.js":{"hash":"32d3957f083e942194b09df1aa9b784a"}},"assetPrefix":"","nextExport":true,"err":null,"chunks":[]}
          module={}
          __NEXT_LOADED_PAGES__ = []
          __NEXT_LOADED_CHUNKS__ = []

          __NEXT_REGISTER_PAGE = function (route, fn) {
            __NEXT_LOADED_PAGES__.push({ route: route, fn: fn })
          }

          __NEXT_REGISTER_CHUNK = function (chunkName, fn) {
            __NEXT_LOADED_CHUNKS__.push({ chunkName: chunkName, fn: fn })
          }

          false
        </script><script async="" id="__NEXT_PAGE__/docs/examples/chat" type="text/javascript" src="/_next/dfec3bf1-e714-44d9-b82e-74a8b15b2776/page/docs/examples/chat.js"></script><script async="" id="__NEXT_PAGE__/_error" type="text/javascript" src="/_next/dfec3bf1-e714-44d9-b82e-74a8b15b2776/page/_error.js"></script><div></div><script type="text/javascript" src="/_next/32d3957f083e942194b09df1aa9b784a/app.js" async=""></script></div><script>
            var _paq = _paq || [];
            _paq.push(['trackPageView']);
            _paq.push(['enableLinkTracking']);
            (function() {
              var u="//zeit.co/api/_/";
              _paq.push(['setTrackerUrl', u+'p']);
              _paq.push(['setSiteId', '1']);
              var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
              g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'p.js'; s.parentNode.insertBefore(g,s);
            })();</script></body></html>