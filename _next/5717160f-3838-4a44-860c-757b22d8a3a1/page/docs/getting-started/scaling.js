module.exports=__NEXT_REGISTER_PAGE("/docs/getting-started/scaling",function(){var e=webpackJsonp([11],{19:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:true});a.default=l;a.setAssetPrefix=o;var n=void 0;function l(e){if(/^https?:\/\//.test(e))return e;var a=e.replace(/^\//,"");return(n||"")+"/static/"+a}function o(e){n=e}},25:function(e,a,t){e.exports=t(19)},26:function(e,a,t){"use strict";var n=t(6);var l=t.n(n);var o=t(0);var r=t.n(o);var c=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]}return e};var s=function e(a){var t=a.src,n=a.width,o=a.height,c=a.margin,s=void 0===c?40:c,i=a.caption,u=a.video,d=void 0===u?false:u,m=a.muted,h=void 0===m?true:m,p=a.autoPlay,E=void 0===p?false:p;if(!n)throw new Error("Please define the width of the image!");if(!o)throw new Error("Please define the height of the image!");var f=String(o/n*100)+"%";return r.a.createElement("figure",{style:{margin:s+"px 0"},className:"jsx-2503757143"},r.a.createElement("main",{style:{width:n},className:"jsx-2503757143"},r.a.createElement("div",{style:{paddingBottom:f},className:"jsx-2503757143"},d?r.a.createElement("video",{src:t,muted:h,autoPlay:E,className:"jsx-2503757143"}):r.a.createElement("img",{src:t,className:"jsx-2503757143"})),i&&r.a.createElement("p",{className:"jsx-2503757143"},i)),r.a.createElement(l.a,{styleId:"2503757143",css:["figure.jsx-2503757143{text-align:center;display:block;}","main.jsx-2503757143{margin:0 auto;max-width:100%;}","div.jsx-2503757143{position:relative;}","img.jsx-2503757143,video.jsx-2503757143{position:absolute;top:0;left:0;height:100%;width:100%;}","p.jsx-2503757143{font-size:11px;text-align:center;color:#999;}"]}))};var i=function e(a){return r.a.createElement(s,c({},a,{video:true}))};a["a"]=s},790:function(e,a,t){e.exports=t(791)},791:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:true});var n=t(0);var l=t.n(n);var o=t(10);var r=t.n(o);var c=t(25);var s=t.n(c);var i=t(15);var u=t(16);var d=t(30);var m=t(24);var h=t(26);var p=t(22);a["default"]=Object(i["b"])({title:"Scaling",date:"10 August 2017",authors:[u["a"]],editUrl:"pages/docs/getting-started/scaling.js"})(r()(i["a"],function(e){return l.a.createElement("div",{className:"_markdown_"},l.a.createElement(e.p,null,"Deploying an app is just the start. We need to scale our app as our user base grows. It could be a linear growth or random spikes in certain times."),l.a.createElement(e.p,null,"Either way, we need to make sure our app is running smoothly as the traffic increases. All the ",l.a.createElement(p["a"],{color:"#000"}),' deployments are backed by "auto scaling ready" infrastructure. So, you are in good hands.'),l.a.createElement(e.h2,null,"Basics"),l.a.createElement(e.p,null,"Each of your ",l.a.createElement(p["a"],{color:"#000"})," deployment consists of zero or few instances. An instance is a running version of your deployment. ",l.a.createElement(p["a"],{color:"#000"})," can clone and run new instances as needed and kill them if they are not needed."),l.a.createElement(e.p,null,"Each deployment has a minimum and maximum amount of instances it can have. Based on that we can scale our app as needed."),l.a.createElement(e.h2,null,"Default Scaling"),l.a.createElement(e.p,null,"By default, all of the deployments are configured like this:"),l.a.createElement(e.ul,null,l.a.createElement(e.li,null,"min: 0"),l.a.createElement(e.li,null,"max: 1")),l.a.createElement(e.p,null,"This means, when your deployment receives some traffic ",l.a.createElement(p["a"],{color:"#000"})," will start an instance. If your deployment doesn't receive any traffic for a while, ",l.a.createElement(p["a"],{color:"#000"})," will kill that instance."),l.a.createElement(e.p,null,"There's a fixed number of concurrent instances you can have based on the ",l.a.createElement(e.a,{href:"https://zeit.co/account/plan"},"plan")," you've chosen. But with this configuration, you can have as many as deployments you want."),l.a.createElement(e.p,null,l.a.createElement(e.em,null,"Having older deployments which are ",l.a.createElement(e.strong,null,"not active")," cost you nothing.")),l.a.createElement(e.h2,null,"Fixed Scaling"),l.a.createElement(e.p,null,"As your user base grows, your app could be slower to respond. Because it tries to serve more requests than it could do."),l.a.createElement(e.p,null,"To resolve this issue, you can scale your app to run a fixed number of instances and they'll run forever."),l.a.createElement(e.p,null,"Here's how you can do that:"),l.a.createElement(e.p,null,l.a.createElement(d["a"],null,"now scale hello-node-lwbxweoqjo.now.sh 3")),l.a.createElement(e.p,null,"In this case, ",l.a.createElement(p["a"],{color:"#000"})," will set the ",l.a.createElement(e.code,null,"min")," and ",l.a.createElement(e.code,null,"max")," instance settings to 3."),l.a.createElement(e.p,null,l.a.createElement(h["a"],{src:s()("/docs/scaling/fixed-scaling.png"),width:650,height:467,caption:"The deployment is scaled to 3 instances and you can see the URLs for each of those instances."})),l.a.createElement(e.h3,null,'With "now alias"'),l.a.createElement(e.p,null,"Here, ",l.a.createElement(e.code,null,"hello-node-lwbxweoqjo.now.sh"),' is one of our deployment URL. Instead, you can scale a "domain name" you mapped with ',l.a.createElement(e.code,null,"now alias"),"."),l.a.createElement(e.p,null,"For an example:"),l.a.createElement(e.p,null,l.a.createElement(d["a"],null,"now scale hnode.now.sh 3")),l.a.createElement(e.p,null,"Then it'll scale the deployment behind the alias. (in this case, the alias is ",l.a.createElement(e.code,null,"hnode.now.sh"),")."),l.a.createElement(e.p,null,"If you run ",l.a.createElement(e.code,null,"now alias")," again, it'll scale the new deployment accordingly and scale down the old deployment to the ",l.a.createElement(m["d"],{href:"/docs/getting-started/scaling#default-scaling"},"default scaling setup"),"."),l.a.createElement(e.p,null,l.a.createElement(h["a"],{src:s()("/docs/scaling/now-alias.png"),width:650,height:467,caption:"Aliasing “hello-node-zhlrfgchkd.now.sh” to “hnode” changes it's scaling settings and “hnode”'s previous deployment."})),l.a.createElement(e.h2,null,"Auto Scaling"),l.a.createElement(e.p,null,"Sometimes, your app may receive sudden traffic spikes and it's pretty hard to predict the pattern. Then you need to scale your app based on the traffic. To do that, you can turn on “auto scaling” by using different ",l.a.createElement(e.code,null,"min")," and ",l.a.createElement(e.code,null,"max")," instance values."),l.a.createElement(e.blockquote,null,l.a.createElement(e.p,null,"You need to have ",l.a.createElement(e.a,{href:"https://zeit.co/pricing"},'the "Pro" plan or a higher plan'),' to do "auto scaling"')),l.a.createElement(e.p,null,"Here's how to auto scale an app with the URL ",l.a.createElement(e.code,null,"hnode.now.sh")),l.a.createElement(e.p,null,l.a.createElement(d["a"],null,"now scale hnode.now.sh 2 15")),l.a.createElement(e.p,null,"Now the deployment behind ",l.a.createElement(e.code,null,"hnode.now.sh")," runs with minimum of 2 instances and it can scale up to 15 instance as the traffic increases."),l.a.createElement(e.p,null,l.a.createElement(p["a"],{color:"#000"})," will automatically start and kill instances based on the traffic ",l.a.createElement(e.code,null,"hnode.now.sh")," receives."),l.a.createElement(e.p,null,l.a.createElement(h["a"],{src:s()("/docs/scaling/auto-scaling.png"),width:650,height:335,caption:"Auto scaling in action."})),l.a.createElement(e.h2,null,"Static Deployments"),l.a.createElement(e.p,null,"All the static deployments are infinitely scalable and they are auto scaled by default on all plans. So, you don't need to invoke ",l.a.createElement(e.code,null,"now scale")," for static deployments."))}))}},[790]);return{page:e.default}});